<style>
  body{
    color: #FFF;
    background-color: #282A3A;
    background-repeat: no-repeat;
  }
</style>

<div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');
  var character="JP"
  var mus = [2.69,1.62,-1.39,1.94,4.22,0.4,-2.25,5.79,2.78,-3.59,3.38,6.07,-3.4,7.02,11.2,9.42,1.01,-2.6,6.77].map(x => x + 50.0)
  var characters = ['Ken', 'JP', 'Cammy', 'Dee Jay', 'Luke', 'Juri', 'Manon', 'Marisa', 'E. Honda', 'Chun-Li', 'Ryu', 'Kimberly', 'Jamie', 'Guile', 'Zangief', 'Blanka', 'Dhalsim', 'Lily']
  var allStat = mus[0];
  var mus = mus.slice(1);
  var characterData = characters.map(function(d, i) {
  return {
    label: d,
    data: mus[i] || 0
  };
});

sortedCharacterData = characterData.sort(function(a, b) {
  return b.data>a.data;
});

sortedCharacters = ['All'];
sortedMatchupData = [allStat];
sortedCharacterData.forEach(function(d){
  sortedCharacters.push(d.label);
  sortedMatchupData.push(d.data);
});
  var mu_colors = sortedMatchupData.map((x) => {
    if (x>50) {
      return "rgba(0,255,122,.75)";
    } else if (x<50) {
      return "rgba(255,0,0,.75)";
    } else {
      return "rgba(255,255,0,.75)";
    }
  })
  document.body.style.backgroundImage = "url('images/" + character.toLowerCase() + ".png')";
  document.body.style.backgroundRepeat = "no-repeat"
  Chart.defaults.color = "#FFFFFF";
  Chart.defaults.font.size = 20;
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: sortedCharacters,
      datasets: [{
        label: 'Winrate %',
        backgroundColor: mu_colors,
        borderColor: "white",
        data: sortedMatchupData,
        borderWidth: 1
      },
      {
            type: 'line',
            backgroundColor: "white",
            color: "white",
            borderColor: "white",
            data: mus.map(()=> 50),
            pointBorderWidth: 0,
            pointStyle: false,
            borderDash: [5,4]
        }]
    },
    options: {
      plugins: {
            legend: {
              display: false
            },
            title: {
                display: true,
                text: character+' Matchup Win %'
            }
        },
      indexAxis: 'y',
      scales: {
        x: {
          min: 40,
          suggestedMax: 60
        }
      }
    }
  });
</script>
 